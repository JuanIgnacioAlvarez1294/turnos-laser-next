(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2844:function(e,t,r){Promise.resolve().then(r.bind(r,864))},864:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),s=r(9630),n=r(2265),o=r(8134),i=()=>{let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{(0,o.V_)().then(e=>{t(e),s(!1)})},[]),r)return(0,a.jsx)("div",{className:"text-center mt-4",children:"Cargando estad\xedsticas..."});let i=e.length,d=e.filter(e=>"pendiente"===e.estado).length,l=e.filter(e=>"completado"===e.estado).length,c=e.filter(e=>"cancelado"===e.estado).length;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4",children:[{title:"Turnos Totales",value:i},{title:"Pendientes",value:d},{title:"Completados",value:l},{title:"Cancelados",value:c}].map((e,t)=>(0,a.jsxs)("div",{className:" bg-white border border-rosa-pastel  shadow-lg rounded-xl p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 flex flex-col items-center text-center ",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-rosa-oscuro",children:e.title}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-2 text-rosa-fuerte",children:e.value})]},t))})};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),c=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},h=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:i="",children:d,iconNode:l,...c}=e;return(0,n.createElement)("svg",{ref:t,...p,width:a,height:a,stroke:r,strokeWidth:o?24*Number(s)/Number(a):s,className:u("lucide",i),...!d&&!h(c)&&{"aria-hidden":"true"},...c},[...l.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),m=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:s,...o}=r;return(0,n.createElement)(x,{ref:a,iconNode:t,className:u("lucide-".concat(d(c(e))),"lucide-".concat(e),s),...o})});return r.displayName=c(e),r},b=m("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),f=m("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),v=m("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var y=()=>{let[e,t]=(0,n.useState)({}),[r,s]=(0,n.useState)([]),[i,d]=(0,n.useState)(!0),l=async()=>{let[e,r]=await Promise.all([(0,o.tJ)(),(0,o.V_)()]);t(e),s(r),d(!1)};(0,n.useEffect)(()=>{l()},[]);let c=async e=>{await (0,o.kb)(e,{estado:"cancelado"}),l()},u=async e=>{confirm("\xbfSeguro que deseas eliminar este turno?")&&(await (0,o.wy)(e),l())};return i?(0,a.jsx)("div",{children:"Cargando turnos..."}):(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto rounded-xl shadow border border-pink-300 bg-white mt-8",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-rosa-pastel shadow-xl rounded-xl",children:[(0,a.jsx)("thead",{className:"bg-rosa-pastel text-rosa-oscuro sticky top-0 z-10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"ID"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Cliente"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Servicio"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Fecha"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Hora"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Estado"}),(0,a.jsx)("th",{className:"py-3 px-4 border-b",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:r.map(t=>{var r;return(0,a.jsxs)("tr",{className:"text-center hover:bg-rosa-fondo transition",children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b",children:decodeURIComponent(t.turnoId)}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b",children:[t.nombre," ",t.apellido]}),(0,a.jsx)("td",{className:"py-2 px-4 border-b",children:null!==(r=e[t.servicioId])&&void 0!==r?r:"Servicio eliminado"}),(0,a.jsx)("td",{className:"py-2 px-4 border-b",children:t.fecha}),(0,a.jsx)("td",{className:"py-2 px-4 border-b",children:t.hora}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b font-semibold",children:["confirmado"===t.estado&&"pendiente"===t.pago&&(0,a.jsx)("span",{className:"text-yellow-600",children:"Reservado (sin pago)"}),"confirmado"===t.estado&&"sena"===t.pago&&(0,a.jsx)("span",{className:"text-orange-600",children:"Reservado (Se\xf1a)"}),"confirmado"===t.estado&&"total"===t.pago&&(0,a.jsx)("span",{className:"text-green-600",children:"Reservado (Pago total)"}),"confirmado"!==t.estado&&(0,a.jsx)("span",{className:"pendiente"===t.estado?"text-rosa-oscuro":"completado"===t.estado?"text-green-600":"text-red-500",children:t.estado})]}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b flex justify-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>window.location.href="/admin/turnos/".concat(t.turnoId),className:"bg-rosa-fuerte text-white px-3 py-1 rounded hover:bg-rosa-oscuro transition flex items-center gap-1",children:[(0,a.jsx)(b,{size:16}),"Editar"]}),(0,a.jsxs)("button",{onClick:()=>c(t.turnoId),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition flex items-center gap-1",children:[(0,a.jsx)(f,{size:16}),"Cancelar"]}),(0,a.jsx)("button",{onClick:()=>u(t.turnoId),className:"bg-red-600 text-white p-2 rounded hover:bg-red-700 transition",children:(0,a.jsx)(v,{size:18})})]})]},t.turnoId)})})]})})};function g(){let{user:e,loading:t}=(0,s.a)();return t?(0,a.jsx)("p",{children:"Cargando..."}):e?(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-rosa-oscuro",children:"Panel Administrativo"}),(0,a.jsx)(i,{}),(0,a.jsx)(y,{})]}):(0,a.jsxs)("p",{className:"text-rosa-oscuro",children:["No autorizado."," ",(0,a.jsx)("a",{href:"/admin/login",className:"text-rosa-fuerte underline",children:"Iniciar sesi\xf3n"})]})}},9630:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return l}});var a=r(7437),s=r(2265),n=r(1098),o=r(5186);let i=(0,s.createContext)(void 0),d=e=>{let{children:t}=e,[r,d]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,o.Aj)(n.I,e=>{d(e),c(!1)});return()=>e()},[]),(0,a.jsx)(i.Provider,{value:{user:r,loading:l},children:t})},l=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1098:function(e,t,r){"use strict";r.d(t,{I:function(){return d},db:function(){return i}});var a=r(5236),s=r(9842),n=r(5186);let o=(0,a.C6)().length>0?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAp-CkuDhxhEACFEQ3ndQnWSV6vsIQWEDI",authDomain:"turnos-laser.firebaseapp.com",projectId:"turnos-laser",storageBucket:"turnos-laser.firebasestorage.app",messagingSenderId:"1096416448046",appId:"1:1096416448046:web:dd918aa84ff5195d8499bf"}),i=(0,s.ad)(o),d=(0,n.v0)(o)},8134:function(e,t,r){"use strict";r.d(t,{Fu:function(){return n},UI:function(){return i},V_:function(){return o},XQ:function(){return d},kb:function(){return l},tJ:function(){return u},wy:function(){return c}});var a=r(1098),s=r(9842);let n=async()=>(await (0,s.PL)((0,s.hJ)(a.db,"servicios"))).docs.map(e=>({id:e.id,...e.data()})),o=async()=>(await (0,s.PL)((0,s.hJ)(a.db,"turnos"))).docs.map(e=>({...e.data(),turnoId:e.id})),i=async e=>{if(!e)throw Error("ID no proporcionado");let t=(0,s.JU)(a.db,"turnos",e),r=await (0,s.QT)(t);return r.exists()?{id:r.id,...r.data()}:null},d=async e=>{let t=(0,s.JU)((0,s.hJ)(a.db,"turnos")),r={turnoId:t.id,userId:"public",sucursal:"principal",nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,emailContacto:e.emailContacto,servicioId:e.servicioId,fecha:e.fecha,hora:e.hora,estado:"pendiente",pago:"pendiente",createdAt:new Date};return await (0,s.pl)(t,r),t.id},l=async(e,t)=>{let r=(0,s.JU)(a.db,"turnos",e);return await (0,s.r7)(r,t)},c=async e=>{let t=(0,s.JU)(a.db,"turnos",e);return await (0,s.oe)(t)},u=async()=>{let e=await (0,s.PL)((0,s.hJ)(a.db,"servicios")),t={};return e.docs.forEach(e=>{let r=e.data();t[e.id]=r.nombre}),t}}},function(e){e.O(0,[358,315,893,971,23,744],function(){return e(e.s=2844)}),_N_E=e.O()}]);