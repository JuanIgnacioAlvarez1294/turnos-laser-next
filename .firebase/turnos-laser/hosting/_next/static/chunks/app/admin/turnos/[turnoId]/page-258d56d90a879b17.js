(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{6123:function(e,a,n){Promise.resolve().then(n.bind(n,7795))},7795:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return i}});var r=n(7437),o=n(2265),t=n(6463),s=n(8134),l=n(2588);function i(){let e=(0,t.useParams)(),a=(0,t.useRouter)(),n=e.turnoId,[i,d]=(0,o.useState)(null),[c,u]=(0,o.useState)([]),[m,b]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=async()=>{try{let e=await (0,s.UI)(n),a=await (0,s.Fu)();e&&d(e),u(a)}catch(e){console.error("Error cargando datos:",e),l.Am.error("No se pudo cargar la informaci\xf3n")}finally{b(!1)}};n&&e()},[n]);let h=e=>{i&&d({...i,[e.target.name]:e.target.value})},x=async()=>{try{await (0,s.kb)(n,i),l.Am.success("Turno actualizado correctamente"),a.push("/admin")}catch(e){l.Am.error("Error al guardar")}},g=async()=>{try{await (0,s.kb)(n,{estado:"completado"}),l.Am.success("Turno marcado como COMPLETADO"),a.push("/admin")}catch(e){l.Am.error("Error al actualizar estado")}},f=async()=>{if(confirm("\xbfEst\xe1s seguro de cancelar este turno?"))try{await (0,s.kb)(n,{estado:"cancelado"}),l.Am.error("Turno CANCELADO"),a.push("/admin")}catch(e){l.Am.error("Error al cancelar")}};return m?(0,r.jsx)("div",{className:"p-8 text-center",children:"Cargando detalles del turno..."}):i?(0,r.jsxs)("div",{className:"p-6 max-w-2xl mx-auto bg-white shadow-xl rounded-2xl border border-gray-100",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Gestionar Turno"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,r.jsx)("input",{name:"nombre",value:i.nombre,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido"}),(0,r.jsx)("input",{name:"apellido",value:i.apellido,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),(0,r.jsx)("input",{name:"telefono",value:i.telefono,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Contacto"}),(0,r.jsx)("input",{name:"emailContacto",value:i.emailContacto,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),(0,r.jsx)("input",{type:"date",name:"fecha",value:i.fecha,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),(0,r.jsx)("input",{type:"time",name:"hora",value:i.hora,onChange:h,className:"border p-2 w-full rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servicio"}),(0,r.jsx)("select",{name:"servicioId",value:i.servicioId,onChange:h,className:"border p-2 w-full rounded-lg mb-4 bg-white outline-none",children:c.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado del Turno"}),(0,r.jsxs)("select",{name:"estado",value:i.estado,onChange:h,className:"border p-2 w-full rounded-lg mb-4 bg-white outline-none",children:[(0,r.jsx)("option",{value:"pendiente",children:"Pendiente (Sin pagar)"}),(0,r.jsx)("option",{value:"confirmado",children:"Confirmado (Pagado)"}),(0,r.jsx)("option",{value:"completado",children:"Completado ✅"}),(0,r.jsx)("option",{value:"cancelado",children:"Cancelado ❌"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado del Pago"}),(0,r.jsxs)("select",{name:"pago",value:i.pago,onChange:h,className:"border p-2 w-full rounded-lg mb-6 bg-white outline-none",children:[(0,r.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,r.jsx)("option",{value:"sena",children:"Se\xf1a Pagada"}),(0,r.jsx)("option",{value:"total",children:"Total Pagado"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-3 mt-4",children:[(0,r.jsx)("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition shadow-md font-medium",children:"Guardar Cambios"}),(0,r.jsx)("button",{onClick:g,className:"bg-green-600 text-white px-6 py-2 rounded-xl hover:bg-green-700 transition shadow-md font-medium",children:"Marcar Completado"}),(0,r.jsx)("button",{onClick:f,className:"bg-white text-red-600 border border-red-200 px-6 py-2 rounded-xl hover:bg-red-50 transition font-medium",children:"Cancelar Turno"})]}),(0,r.jsx)("button",{onClick:()=>a.push("/admin"),className:"mt-8 w-full text-center py-2 text-gray-500 hover:text-gray-800 transition text-sm",children:"← Volver al Dashboard"})]}):(0,r.jsxs)("div",{className:"p-8 text-center",children:["Turno no encontrado (ID: ",n,")"]})}},6463:function(e,a,n){"use strict";var r=n(1169);n.o(r,"useParams")&&n.d(a,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(a,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(a,{useSearchParams:function(){return r.useSearchParams}})},1098:function(e,a,n){"use strict";n.d(a,{I:function(){return i},db:function(){return l}});var r=n(5236),o=n(9842),t=n(5186);let s=(0,r.C6)().length>0?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyAp-CkuDhxhEACFEQ3ndQnWSV6vsIQWEDI",authDomain:"turnos-laser.firebaseapp.com",projectId:"turnos-laser",storageBucket:"turnos-laser.firebasestorage.app",messagingSenderId:"1096416448046",appId:"1:1096416448046:web:dd918aa84ff5195d8499bf"}),l=(0,o.ad)(s),i=(0,t.v0)(s)},8134:function(e,a,n){"use strict";n.d(a,{Fu:function(){return t},UI:function(){return l},V_:function(){return s},XQ:function(){return i},kb:function(){return d},tJ:function(){return u},wy:function(){return c}});var r=n(1098),o=n(9842);let t=async()=>(await (0,o.PL)((0,o.hJ)(r.db,"servicios"))).docs.map(e=>({id:e.id,...e.data()})),s=async()=>(await (0,o.PL)((0,o.hJ)(r.db,"turnos"))).docs.map(e=>({...e.data(),turnoId:e.id})),l=async e=>{if(!e)throw Error("ID no proporcionado");let a=(0,o.JU)(r.db,"turnos",e),n=await (0,o.QT)(a);return n.exists()?{id:n.id,...n.data()}:null},i=async e=>{let a=(0,o.JU)((0,o.hJ)(r.db,"turnos")),n={turnoId:a.id,userId:"public",sucursal:"principal",nombre:e.nombre,apellido:e.apellido,telefono:e.telefono,emailContacto:e.emailContacto,servicioId:e.servicioId,fecha:e.fecha,hora:e.hora,estado:"pendiente",pago:"pendiente",createdAt:new Date};return await (0,o.pl)(a,n),a.id},d=async(e,a)=>{let n=(0,o.JU)(r.db,"turnos",e);return await (0,o.r7)(n,a)},c=async e=>{let a=(0,o.JU)(r.db,"turnos",e);return await (0,o.oe)(a)},u=async()=>{let e=await (0,o.PL)((0,o.hJ)(r.db,"servicios")),a={};return e.docs.forEach(e=>{let n=e.data();a[e.id]=n.nombre}),a}}},function(e){e.O(0,[358,315,893,588,971,23,744],function(){return e(e.s=6123)}),_N_E=e.O()}]);